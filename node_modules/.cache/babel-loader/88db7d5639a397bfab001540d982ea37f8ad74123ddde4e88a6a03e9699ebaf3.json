{"ast":null,"code":"import _regeneratorRuntime from\"D:/\\u0443\\u0447\\u0435\\u0431\\u0430/\\u0418\\u0413\\u042D\\u0423/3 \\u043A\\u0443\\u0440\\u0441/\\u0421\\u0430\\u0434\\u0438\\u043A\\u043E\\u0432 \\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F/hahaclient/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/\\u0443\\u0447\\u0435\\u0431\\u0430/\\u0418\\u0413\\u042D\\u0423/3 \\u043A\\u0443\\u0440\\u0441/\\u0421\\u0430\\u0434\\u0438\\u043A\\u043E\\u0432 \\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F/hahaclient/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/\\u0443\\u0447\\u0435\\u0431\\u0430/\\u0418\\u0413\\u042D\\u0423/3 \\u043A\\u0443\\u0440\\u0441/\\u0421\\u0430\\u0434\\u0438\\u043A\\u043E\\u0432 \\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F/hahaclient/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{Button,Checkbox,Form,Input}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LogIn=function LogIn(_ref){var user=_ref.user,setUser=_ref.setUser;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),errorMessages=_useState2[0],setErrorMessages=_useState2[1];var navigate=useNavigate();var logIn=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(formValues){var requestOptions;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(\"Success:\",formValues);requestOptions={method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({email:formValues.username,password:formValues.password,rememberme:formValues.remember})};_context.next=4;return fetch(\"api/account/login\",requestOptions).then(function(response){// console.log(response.status)\nresponse.status===200&&setUser({isAuthenticated:true,userName:\"\",userRole:\"\"});return response.json();}).then(function(data){console.log(\"Data:\",data);if(typeof data!==\"undefined\"&&typeof data.userName!==\"undefined\"){setUser({isAuthenticated:true,userName:data.userName,userRole:data.userRole});navigate(\"/\");}typeof data!==\"undefined\"&&typeof data.error!==\"undefined\"&&setErrorMessages(data.error);},function(error){console.log(error);});case 4:return _context.abrupt(\"return\",_context.sent);case 5:case\"end\":return _context.stop();}},_callee);}));return function logIn(_x){return _ref2.apply(this,arguments);};}();var renderErrorMessage=function renderErrorMessage(){return errorMessages.map(function(error,index){return/*#__PURE__*/_jsx(\"div\",{children:error},index);});};return/*#__PURE__*/_jsx(_Fragment,{children:user.isAuthenticated?/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \",user.userName,\" \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0432\\u043E\\u0448\\u0435\\u043B \\u0432 \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443\"]}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{align:\"center\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{fontSize:22,marginTop:'50px',color:\"var(--blue)\",fontFamily:\"Cinzel\"},children:\"SING IN\"}),/*#__PURE__*/_jsxs(Form,{onFinish:logIn,name:\"basic\",labelCol:{span:5},wrapperCol:{span:15},style:{maxWidth:1000},initialValues:{remember:false},onFinishFailed:renderErrorMessage,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(Form.Item,{label:/*#__PURE__*/_jsx(\"label\",{style:{color:\"var(--blue)\",fontFamily:\"Cinzela\",fontSize:25},children:\"Username\"}),name:\"username\",rules:[{required:true,message:\"Введите имя пользователя!\"}],children:/*#__PURE__*/_jsx(Input,{style:{height:'40px',width:'500px',fontSize:'20px',backgroundColor:\"var(--blue)\"}})}),/*#__PURE__*/_jsx(Form.Item,{label:/*#__PURE__*/_jsx(\"label\",{style:{color:\"var(--blue)\",fontFamily:\"Cinzela\",fontSize:25},children:\"Password\"}),name:\"password\",rules:[{required:true,message:\"Введите пароль!\"}],children:/*#__PURE__*/_jsx(Input.Password,{style:{height:'40px',width:'500px',fontSize:'20px',backgroundColor:\"var(--blue)\"}})}),/*#__PURE__*/_jsxs(Form.Item,{name:\"remember\",valuePropName:\"checked\",wrapperCol:{offset:8,span:16},children:[/*#__PURE__*/_jsx(Checkbox,{style:{color:\"var(--blue)\",fontFamily:\"Cinzela\",fontSize:20,marginRight:\"300px\"},children:\"Remember me\"}),renderErrorMessage()]}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:8,span:16},children:/*#__PURE__*/_jsx(Button,{style:{backgroundColor:\"var(--blue)\",marginRight:\"300px\"},type:\"primary\",htmlType:\"submit\",children:\"Submit\"})})]})]})})});};export default LogIn;","map":{"version":3,"names":["React","useState","useNavigate","Button","Checkbox","Form","Input","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LogIn","_ref","user","setUser","_useState","_useState2","_slicedToArray","errorMessages","setErrorMessages","navigate","logIn","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formValues","requestOptions","wrap","_callee$","_context","prev","next","console","log","method","headers","body","JSON","stringify","email","username","password","rememberme","remember","fetch","then","response","status","isAuthenticated","userName","userRole","json","data","error","abrupt","sent","stop","_x","apply","arguments","renderErrorMessage","map","index","children","align","style","fontSize","marginTop","color","fontFamily","onFinish","name","labelCol","span","wrapperCol","maxWidth","initialValues","onFinishFailed","autoComplete","Item","label","rules","required","message","height","width","backgroundColor","Password","valuePropName","offset","marginRight","type","htmlType"],"sources":["D:/учеба/ИГЭУ/3 курс/Садиков Курсовая/hahaclient/src/Components/LogIn/LogIn.js"],"sourcesContent":["import React, { useState } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { Button, Checkbox, Form, Input } from \"antd\"\r\n\r\nconst LogIn = ({ user, setUser }) => {\r\n  const [errorMessages, setErrorMessages] = useState([])\r\n  const navigate = useNavigate()\r\n\r\n  const logIn = async (formValues) => {\r\n    console.log(\"Success:\", formValues);\r\n\r\n\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        email: formValues.username,\r\n        password: formValues.password,\r\n        rememberme: formValues.remember,\r\n      }),\r\n    }\r\n    return await fetch(\"api/account/login\", requestOptions)\r\n      .then((response) => {\r\n        // console.log(response.status)\r\n        response.status === 200 &&\r\n          setUser({ isAuthenticated: true, userName: \"\", userRole: \"\"})\r\n        return response.json()\r\n      })\r\n      .then(\r\n        (data) => {\r\n          console.log(\"Data:\", data)\r\n          if (\r\n            typeof data !== \"undefined\" &&\r\n            typeof data.userName !== \"undefined\"\r\n          ) {\r\n            setUser({ isAuthenticated: true, userName: data.userName, userRole: data.userRole  })\r\n            navigate(\"/\")\r\n          }\r\n          typeof data !== \"undefined\" &&\r\n            typeof data.error !== \"undefined\" &&\r\n            setErrorMessages(data.error)\r\n        },\r\n        (error) => {\r\n          console.log(error)\r\n        }\r\n      )\r\n  }\r\n\r\n  const renderErrorMessage = () =>\r\n    errorMessages.map((error, index) => <div key={index}>{error}</div>)\r\n\r\n  return (\r\n    <>\r\n      {user.isAuthenticated ? (\r\n        <h3>Пользователь {user.userName} успешно вошел в систему</h3>\r\n      ) : (\r\n        <>\r\n        <div align=\"center\"> \r\n        <h3 style={{fontSize:22, marginTop:'50px', color:\"var(--blue)\", fontFamily:\"Cinzel\",}}>SING IN</h3>\r\n\r\n<Form\r\n  onFinish={logIn}\r\n  name=\"basic\"\r\n  labelCol={{ span: 5 }}\r\n  wrapperCol={{ span: 15 }}\r\n  style={{ maxWidth: 1000 }}\r\n  initialValues={{ remember: false }}\r\n  onFinishFailed={renderErrorMessage}\r\n  autoComplete=\"off\"\r\n  \r\n>\r\n  <Form.Item\r\n    label={<label style={{ color: \"var(--blue)\", fontFamily:\"Cinzela\", fontSize: 25 }}>Username</label>}\r\n    name=\"username\"\r\n    rules={[\r\n      { required: true, message: \"Введите имя пользователя!\" },\r\n    ]}\r\n  >\r\n    <Input  style={{ height: '40px', width: '500px', fontSize: '20px',backgroundColor:\"var(--blue)\" }}/>\r\n  </Form.Item>\r\n\r\n  <Form.Item\r\n    label={<label style={{ color: \"var(--blue)\", fontFamily:\"Cinzela\", fontSize: 25 }}>Password</label>}\r\n    name=\"password\"\r\n    \r\n    rules={[\r\n      { required: true, message: \"Введите пароль!\" },\r\n    ]}\r\n  >\r\n    <Input.Password style={{ height: '40px', width: '500px', fontSize: '20px',backgroundColor:\"var(--blue)\"  }} />\r\n  </Form.Item>\r\n\r\n  <Form.Item\r\n    name=\"remember\"\r\n    valuePropName=\"checked\"\r\n    wrapperCol={{ offset: 8, span: 16 }}\r\n  >\r\n    <Checkbox style={{ color: \"var(--blue)\", fontFamily:\"Cinzela\", fontSize: 20, marginRight:\"300px\" }}>Remember me</Checkbox>\r\n    {renderErrorMessage()}\r\n  </Form.Item>\r\n  <Form.Item wrapperCol={{ offset: 8, span: 16 }}>\r\n    <Button style={{backgroundColor:\"var(--blue)\", marginRight:\"300px\"}} type=\"primary\" htmlType=\"submit\">\r\n      Submit\r\n    </Button>\r\n  </Form.Item>\r\n</Form>\r\n        </div>\r\n          \r\n        </>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default LogIn\r\n"],"mappings":"s0BAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,MAAM,CAAEC,QAAQ,CAAEC,IAAI,CAAEC,KAAK,KAAQ,MAAM,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAEpD,GAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAAC,IAAA,CAA0B,IAApB,CAAAC,IAAI,CAAAD,IAAA,CAAJC,IAAI,CAAEC,OAAO,CAAAF,IAAA,CAAPE,OAAO,CAC5B,IAAAC,SAAA,CAA0ChB,QAAQ,CAAC,EAAE,CAAC,CAAAiB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/CG,aAAa,CAAAF,UAAA,IAAEG,gBAAgB,CAAAH,UAAA,IACtC,GAAM,CAAAI,QAAQ,CAAGpB,WAAW,EAAE,CAE9B,GAAM,CAAAqB,KAAK,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,UAAU,MAAAC,cAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC7BC,OAAO,CAACC,GAAG,CAAC,UAAU,CAAER,UAAU,CAAC,CAG7BC,cAAc,CAAG,CACrBQ,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,KAAK,CAAEd,UAAU,CAACe,QAAQ,CAC1BC,QAAQ,CAAEhB,UAAU,CAACgB,QAAQ,CAC7BC,UAAU,CAAEjB,UAAU,CAACkB,QACzB,CAAC,CACH,CAAC,CAAAd,QAAA,CAAAE,IAAA,SACY,CAAAa,KAAK,CAAC,mBAAmB,CAAElB,cAAc,CAAC,CACpDmB,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClB;AACAA,QAAQ,CAACC,MAAM,GAAK,GAAG,EACrBnC,OAAO,CAAC,CAAEoC,eAAe,CAAE,IAAI,CAAEC,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAE,CAAC,CAAC,CAC/D,MAAO,CAAAJ,QAAQ,CAACK,IAAI,EAAE,CACxB,CAAC,CAAC,CACDN,IAAI,CACH,SAACO,IAAI,CAAK,CACRpB,OAAO,CAACC,GAAG,CAAC,OAAO,CAAEmB,IAAI,CAAC,CAC1B,GACE,MAAO,CAAAA,IAAI,GAAK,WAAW,EAC3B,MAAO,CAAAA,IAAI,CAACH,QAAQ,GAAK,WAAW,CACpC,CACArC,OAAO,CAAC,CAAEoC,eAAe,CAAE,IAAI,CAAEC,QAAQ,CAAEG,IAAI,CAACH,QAAQ,CAAEC,QAAQ,CAAEE,IAAI,CAACF,QAAU,CAAC,CAAC,CACrFhC,QAAQ,CAAC,GAAG,CAAC,CACf,CACA,MAAO,CAAAkC,IAAI,GAAK,WAAW,EACzB,MAAO,CAAAA,IAAI,CAACC,KAAK,GAAK,WAAW,EACjCpC,gBAAgB,CAACmC,IAAI,CAACC,KAAK,CAAC,CAChC,CAAC,CACD,SAACA,KAAK,CAAK,CACTrB,OAAO,CAACC,GAAG,CAACoB,KAAK,CAAC,CACpB,CAAC,CACF,eAAAxB,QAAA,CAAAyB,MAAA,UAAAzB,QAAA,CAAA0B,IAAA,0BAAA1B,QAAA,CAAA2B,IAAA,MAAAhC,OAAA,GACJ,kBAtCK,CAAAL,KAAKA,CAAAsC,EAAA,SAAArC,KAAA,CAAAsC,KAAA,MAAAC,SAAA,OAsCV,CAED,GAAM,CAAAC,kBAAkB,CAAG,QAArB,CAAAA,kBAAkBA,CAAA,QACtB,CAAA5C,aAAa,CAAC6C,GAAG,CAAC,SAACR,KAAK,CAAES,KAAK,qBAAK1D,IAAA,QAAA2D,QAAA,CAAkBV,KAAK,EAAbS,KAAK,CAAe,GAAC,GAErE,mBACE1D,IAAA,CAAAI,SAAA,EAAAuD,QAAA,CACGpD,IAAI,CAACqC,eAAe,cACnB1C,KAAA,OAAAyD,QAAA,EAAI,2EAAa,CAACpD,IAAI,CAACsC,QAAQ,CAAC,8HAAwB,GAAK,cAE7D7C,IAAA,CAAAI,SAAA,EAAAuD,QAAA,cACAzD,KAAA,QAAK0D,KAAK,CAAC,QAAQ,CAAAD,QAAA,eACnB3D,IAAA,OAAI6D,KAAK,CAAE,CAACC,QAAQ,CAAC,EAAE,CAAEC,SAAS,CAAC,MAAM,CAAEC,KAAK,CAAC,aAAa,CAAEC,UAAU,CAAC,QAAS,CAAE,CAAAN,QAAA,CAAC,SAAO,EAAK,cAE3GzD,KAAA,CAACL,IAAI,EACHqE,QAAQ,CAAEnD,KAAM,CAChBoD,IAAI,CAAC,OAAO,CACZC,QAAQ,CAAE,CAAEC,IAAI,CAAE,CAAE,CAAE,CACtBC,UAAU,CAAE,CAAED,IAAI,CAAE,EAAG,CAAE,CACzBR,KAAK,CAAE,CAAEU,QAAQ,CAAE,IAAK,CAAE,CAC1BC,aAAa,CAAE,CAAEjC,QAAQ,CAAE,KAAM,CAAE,CACnCkC,cAAc,CAAEjB,kBAAmB,CACnCkB,YAAY,CAAC,KAAK,CAAAf,QAAA,eAGlB3D,IAAA,CAACH,IAAI,CAAC8E,IAAI,EACRC,KAAK,cAAE5E,IAAA,UAAO6D,KAAK,CAAE,CAAEG,KAAK,CAAE,aAAa,CAAEC,UAAU,CAAC,SAAS,CAAEH,QAAQ,CAAE,EAAG,CAAE,CAAAH,QAAA,CAAC,UAAQ,EAAS,CACpGQ,IAAI,CAAC,UAAU,CACfU,KAAK,CAAE,CACL,CAAEC,QAAQ,CAAE,IAAI,CAAEC,OAAO,CAAE,2BAA4B,CAAC,CACxD,CAAApB,QAAA,cAEF3D,IAAA,CAACF,KAAK,EAAE+D,KAAK,CAAE,CAAEmB,MAAM,CAAE,MAAM,CAAEC,KAAK,CAAE,OAAO,CAAEnB,QAAQ,CAAE,MAAM,CAACoB,eAAe,CAAC,aAAc,CAAE,EAAE,EAC1F,cAEZlF,IAAA,CAACH,IAAI,CAAC8E,IAAI,EACRC,KAAK,cAAE5E,IAAA,UAAO6D,KAAK,CAAE,CAAEG,KAAK,CAAE,aAAa,CAAEC,UAAU,CAAC,SAAS,CAAEH,QAAQ,CAAE,EAAG,CAAE,CAAAH,QAAA,CAAC,UAAQ,EAAS,CACpGQ,IAAI,CAAC,UAAU,CAEfU,KAAK,CAAE,CACL,CAAEC,QAAQ,CAAE,IAAI,CAAEC,OAAO,CAAE,iBAAkB,CAAC,CAC9C,CAAApB,QAAA,cAEF3D,IAAA,CAACF,KAAK,CAACqF,QAAQ,EAACtB,KAAK,CAAE,CAAEmB,MAAM,CAAE,MAAM,CAAEC,KAAK,CAAE,OAAO,CAAEnB,QAAQ,CAAE,MAAM,CAACoB,eAAe,CAAC,aAAe,CAAE,EAAG,EACpG,cAEZhF,KAAA,CAACL,IAAI,CAAC8E,IAAI,EACRR,IAAI,CAAC,UAAU,CACfiB,aAAa,CAAC,SAAS,CACvBd,UAAU,CAAE,CAAEe,MAAM,CAAE,CAAC,CAAEhB,IAAI,CAAE,EAAG,CAAE,CAAAV,QAAA,eAEpC3D,IAAA,CAACJ,QAAQ,EAACiE,KAAK,CAAE,CAAEG,KAAK,CAAE,aAAa,CAAEC,UAAU,CAAC,SAAS,CAAEH,QAAQ,CAAE,EAAE,CAAEwB,WAAW,CAAC,OAAQ,CAAE,CAAA3B,QAAA,CAAC,aAAW,EAAW,CACzHH,kBAAkB,EAAE,GACX,cACZxD,IAAA,CAACH,IAAI,CAAC8E,IAAI,EAACL,UAAU,CAAE,CAAEe,MAAM,CAAE,CAAC,CAAEhB,IAAI,CAAE,EAAG,CAAE,CAAAV,QAAA,cAC7C3D,IAAA,CAACL,MAAM,EAACkE,KAAK,CAAE,CAACqB,eAAe,CAAC,aAAa,CAAEI,WAAW,CAAC,OAAO,CAAE,CAACC,IAAI,CAAC,SAAS,CAACC,QAAQ,CAAC,QAAQ,CAAA7B,QAAA,CAAC,QAEtG,EAAS,EACC,GACP,GACO,EAGP,EACA,CAEP,CAAC,CAED,cAAe,CAAAtD,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}