{"ast":null,"code":"import _regeneratorRuntime from\"D:/\\u0443\\u0447\\u0435\\u0431\\u0430/\\u0418\\u0413\\u042D\\u0423/3 \\u043A\\u0443\\u0440\\u0441/\\u0421\\u0430\\u0434\\u0438\\u043A\\u043E\\u0432 \\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F/hahaclient/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/\\u0443\\u0447\\u0435\\u0431\\u0430/\\u0418\\u0413\\u042D\\u0423/3 \\u043A\\u0443\\u0440\\u0441/\\u0421\\u0430\\u0434\\u0438\\u043A\\u043E\\u0432 \\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F/hahaclient/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/\\u0443\\u0447\\u0435\\u0431\\u0430/\\u0418\\u0413\\u042D\\u0423/3 \\u043A\\u0443\\u0440\\u0441/\\u0421\\u0430\\u0434\\u0438\\u043A\\u043E\\u0432 \\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F/hahaclient/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{Modal}from\"antd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LogOff=function LogOff(_ref){var setUser=_ref.setUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var navigate=useNavigate();var showModal=function showModal(){setOpen(true);};useEffect(function(){showModal();},[]);var logOff=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var requestOptions;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();requestOptions={method:\"POST\"};_context.next=4;return fetch(\"api/account/logoff\",requestOptions).then(function(response){response.status===200&&setUser({isAuthenticated:false,userName:\"\",userRole:\"\"});response.status===401?navigate(\"/login\"):navigate(\"/\");});case 4:return _context.abrupt(\"return\",_context.sent);case 5:case\"end\":return _context.stop();}},_callee);}));return function logOff(_x){return _ref2.apply(this,arguments);};}();var handleCancel=function handleCancel(){console.log(\"Clicked cancel button\");setOpen(false);navigate(\"/\");};return/*#__PURE__*/_jsxs(_Fragment,{children:[\"user.isAuthenticated ? (\",/*#__PURE__*/_jsx(Modal,{title:\"Title\",open:open,onOk:logOff,onCancel:handleCancel,children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u044C \\u0432\\u044B\\u0445\\u043E\\u0434?\"})}),\")\"]});};export default LogOff;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Modal","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","LogOff","_ref","setUser","_useState","_useState2","_slicedToArray","open","setOpen","navigate","showModal","logOff","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","requestOptions","wrap","_callee$","_context","prev","next","preventDefault","method","fetch","then","response","status","isAuthenticated","userName","userRole","abrupt","sent","stop","_x","apply","arguments","handleCancel","console","log","children","title","onOk","onCancel"],"sources":["D:/учеба/ИГЭУ/3 курс/Садиков Курсовая/hahaclient/src/Components/LogOff/LogOff.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { Modal } from \"antd\"\r\n\r\n\r\nconst LogOff = ({ setUser }) => {\r\n  const [open, setOpen] = useState(false)\r\n  const navigate = useNavigate()\r\n\r\n  const showModal = () => {\r\n    setOpen(true)\r\n  }\r\n\r\n  useEffect(() => {\r\n    showModal()\r\n  }, [])\r\n\r\n  const logOff = async (event) => {\r\n    event.preventDefault()\r\n\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n    }\r\n    return await fetch(\"api/account/logoff\", requestOptions)\r\n      .then((response) => {\r\n        response.status === 200 &&\r\n          setUser({ isAuthenticated: false, userName: \"\", userRole: \"\" })\r\n\r\n        response.status === 401 ? navigate(\"/login\") : navigate(\"/\")\r\n      })      \r\n  }\r\n  const handleCancel = () => {\r\n    console.log(\"Clicked cancel button\")\r\n    setOpen(false)\r\n    navigate(\"/\")\r\n  }\r\n\r\n  return (\r\n    <>\r\n    user.isAuthenticated ? (\r\n         <Modal title=\"Title\" open={open} onOk={logOff} onCancel={handleCancel}>\r\n         <p>Выполнить выход?</p>\r\n       </Modal>\r\n      )\r\n    \r\n    </>\r\n  )\r\n}\r\n\r\nexport default LogOff\r\n"],"mappings":"s0BAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,KAAK,KAAQ,MAAM,QAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAG5B,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAAC,IAAA,CAAoB,IAAd,CAAAC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CACvB,IAAAC,SAAA,CAAwBZ,QAAQ,CAAC,KAAK,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAhCG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,GAAM,CAAAI,QAAQ,CAAGhB,WAAW,EAAE,CAE9B,GAAM,CAAAiB,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CACtBF,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAEDjB,SAAS,CAAC,UAAM,CACdmB,SAAS,EAAE,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAC,MAAM,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,KAAK,MAAAC,cAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACzBN,KAAK,CAACO,cAAc,EAAE,CAEhBN,cAAc,CAAG,CACrBO,MAAM,CAAE,MACV,CAAC,CAAAJ,QAAA,CAAAE,IAAA,SACY,CAAAG,KAAK,CAAC,oBAAoB,CAAER,cAAc,CAAC,CACrDS,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClBA,QAAQ,CAACC,MAAM,GAAK,GAAG,EACrB1B,OAAO,CAAC,CAAE2B,eAAe,CAAE,KAAK,CAAEC,QAAQ,CAAE,EAAE,CAAEC,QAAQ,CAAE,EAAG,CAAC,CAAC,CAEjEJ,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAGpB,QAAQ,CAAC,QAAQ,CAAC,CAAGA,QAAQ,CAAC,GAAG,CAAC,CAC9D,CAAC,CAAC,eAAAY,QAAA,CAAAY,MAAA,UAAAZ,QAAA,CAAAa,IAAA,0BAAAb,QAAA,CAAAc,IAAA,MAAAnB,OAAA,GACL,kBAbK,CAAAL,MAAMA,CAAAyB,EAAA,SAAAxB,KAAA,CAAAyB,KAAA,MAAAC,SAAA,OAaX,CACD,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzBC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CACpCjC,OAAO,CAAC,KAAK,CAAC,CACdC,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,CAED,mBACET,KAAA,CAAAF,SAAA,EAAA4C,QAAA,EAAE,0BAEG,cAAA9C,IAAA,CAACF,KAAK,EAACiD,KAAK,CAAC,OAAO,CAACpC,IAAI,CAAEA,IAAK,CAACqC,IAAI,CAAEjC,MAAO,CAACkC,QAAQ,CAAEN,YAAa,CAAAG,QAAA,cACtE9C,IAAA,MAAA8C,QAAA,CAAG,wFAAgB,EAAI,EACjB,IAGX,GAAG,CAEP,CAAC,CAED,cAAe,CAAAzC,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}