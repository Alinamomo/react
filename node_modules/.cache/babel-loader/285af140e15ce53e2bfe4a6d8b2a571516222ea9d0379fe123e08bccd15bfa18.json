{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u0443\\u0447\\u0435\\u0431\\u0430\\\\\\u0418\\u0413\\u042D\\u0423\\\\3 \\u043A\\u0443\\u0440\\u0441\\\\\\u0421\\u0430\\u0434\\u0438\\u043A\\u043E\\u0432 \\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F\\\\hahaclient\\\\src\\\\Components\\\\LogOff\\\\LogOff.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Modal } from \"antd\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LogOff = _ref => {\n  _s();\n  let {\n    setUser\n  } = _ref;\n  const [open, setOpen] = useState(false);\n  const navigate = useNavigate();\n  const showModal = () => {\n    setOpen(true);\n  };\n  useEffect(() => {\n    showModal();\n  }, []);\n  const logOff = async event => {\n    event.preventDefault();\n    const requestOptions = {\n      method: \"POST\"\n    };\n    return await fetch(\"api/account/logoff\", requestOptions).then(response => {\n      response.status === 200 && setUser({\n        isAuthenticated: false,\n        userName: \"\",\n        userRole: \"\"\n      });\n      response.status === 401 ? navigate(\"/login\") : navigate(\"/\");\n    });\n  };\n  const handleCancel = () => {\n    console.log(\"Clicked cancel button\");\n    setOpen(false);\n    navigate(\"/\");\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [\"user.isAuthenticated ? (\", /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"Title\",\n      open: open,\n      onOk: logOff,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u044C \\u0432\\u044B\\u0445\\u043E\\u0434?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 10\n    }, this), \")\"]\n  }, void 0, true);\n};\n_s(LogOff, \"bT6+YGuv92lELbFUGhuBpXy6bog=\", false, function () {\n  return [useNavigate];\n});\n_c = LogOff;\nexport default LogOff;\nvar _c;\n$RefreshReg$(_c, \"LogOff\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Modal","jsxDEV","_jsxDEV","Fragment","_Fragment","LogOff","_ref","_s","setUser","open","setOpen","navigate","showModal","logOff","event","preventDefault","requestOptions","method","fetch","then","response","status","isAuthenticated","userName","userRole","handleCancel","console","log","children","title","onOk","onCancel","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/учеба/ИГЭУ/3 курс/Садиков Курсовая/hahaclient/src/Components/LogOff/LogOff.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { Modal } from \"antd\"\r\n\r\n\r\nconst LogOff = ({ setUser }) => {\r\n  const [open, setOpen] = useState(false)\r\n  const navigate = useNavigate()\r\n\r\n  const showModal = () => {\r\n    setOpen(true)\r\n  }\r\n\r\n  useEffect(() => {\r\n    showModal()\r\n  }, [])\r\n\r\n  const logOff = async (event) => {\r\n    event.preventDefault()\r\n\r\n    const requestOptions = {\r\n      method: \"POST\",\r\n    }\r\n    return await fetch(\"api/account/logoff\", requestOptions)\r\n      .then((response) => {\r\n        response.status === 200 &&\r\n          setUser({ isAuthenticated: false, userName: \"\", userRole: \"\" })\r\n\r\n        response.status === 401 ? navigate(\"/login\") : navigate(\"/\")\r\n      })      \r\n  }\r\n  const handleCancel = () => {\r\n    console.log(\"Clicked cancel button\")\r\n    setOpen(false)\r\n    navigate(\"/\")\r\n  }\r\n\r\n  return (\r\n    <>\r\n    user.isAuthenticated ? (\r\n         <Modal title=\"Title\" open={open} onOk={logOff} onCancel={handleCancel}>\r\n         <p>Выполнить выход?</p>\r\n       </Modal>\r\n      )\r\n    \r\n    </>\r\n  )\r\n}\r\n\r\nexport default LogOff\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,KAAK,QAAQ,MAAM;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAG5B,MAAMC,MAAM,GAAGC,IAAA,IAAiB;EAAAC,EAAA;EAAA,IAAhB;IAAEC;EAAQ,CAAC,GAAAF,IAAA;EACzB,MAAM,CAACG,IAAI,EAAEC,OAAO,CAAC,GAAGZ,QAAQ,CAAC,KAAK,CAAC;EACvC,MAAMa,QAAQ,GAAGZ,WAAW,EAAE;EAE9B,MAAMa,SAAS,GAAGA,CAAA,KAAM;IACtBF,OAAO,CAAC,IAAI,CAAC;EACf,CAAC;EAEDb,SAAS,CAAC,MAAM;IACde,SAAS,EAAE;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,MAAM,GAAG,MAAOC,KAAK,IAAK;IAC9BA,KAAK,CAACC,cAAc,EAAE;IAEtB,MAAMC,cAAc,GAAG;MACrBC,MAAM,EAAE;IACV,CAAC;IACD,OAAO,MAAMC,KAAK,CAAC,oBAAoB,EAAEF,cAAc,CAAC,CACrDG,IAAI,CAAEC,QAAQ,IAAK;MAClBA,QAAQ,CAACC,MAAM,KAAK,GAAG,IACrBb,OAAO,CAAC;QAAEc,eAAe,EAAE,KAAK;QAAEC,QAAQ,EAAE,EAAE;QAAEC,QAAQ,EAAE;MAAG,CAAC,CAAC;MAEjEJ,QAAQ,CAACC,MAAM,KAAK,GAAG,GAAGV,QAAQ,CAAC,QAAQ,CAAC,GAAGA,QAAQ,CAAC,GAAG,CAAC;IAC9D,CAAC,CAAC;EACN,CAAC;EACD,MAAMc,YAAY,GAAGA,CAAA,KAAM;IACzBC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;IACpCjB,OAAO,CAAC,KAAK,CAAC;IACdC,QAAQ,CAAC,GAAG,CAAC;EACf,CAAC;EAED,oBACET,OAAA,CAAAE,SAAA;IAAAwB,QAAA,GAAE,0BAEG,eAAA1B,OAAA,CAACF,KAAK;MAAC6B,KAAK,EAAC,OAAO;MAACpB,IAAI,EAAEA,IAAK;MAACqB,IAAI,EAAEjB,MAAO;MAACkB,QAAQ,EAAEN,YAAa;MAAAG,QAAA,eACtE1B,OAAA;QAAA0B,QAAA,EAAG;MAAgB;QAAAI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA;IAAI;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,QACjB,KAGX;EAAA,gBAAG;AAEP,CAAC;AAAA5B,EAAA,CA1CKF,MAAM;EAAA,QAEON,WAAW;AAAA;AAAAqC,EAAA,GAFxB/B,MAAM;AA4CZ,eAAeA,MAAM;AAAA,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}